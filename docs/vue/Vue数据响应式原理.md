
## Vue数据响应式流程
![avatar](https://p5.ssl.qhimg.com/t017c8253cab3c9938f.png)
### Vue2.0数据响应式原理
vue2中的数据响应式会根据数据类型来做不同的处理，如果是对象则采用Object.defineProperty的方式定义数据拦截，当数据被访问或者发生变化时，我们感知并做出响应。如果是数组则通过覆盖该数组原型的方法，扩展它的7（'push','pop','shift','unshift','splice','sort','reverse'）个变更方法，使这些方法可以额外的做更新通知，从而作出响应。这种机制很好的解决了数据响应化的问题，但在实际使用中也存在一些缺点：比如初始化时的递归遍历会造成性能损失；新增或删除属性时需要用户使用Vue.set/delete这样特殊的api才能生效；对于es6中新产生的Map、Set这些数据结构不支持等问题。
#### vue2中存在的几个问题
1.初始化时需要遍历对象的所有key，如果对象层级比较深，性能不好。
2.通知更新过程需要维护大量dep实例和watcher实例，额外占用内存比较多
3.动态新增、删除对象属性无法拦截，只能用特定set/delete api代替
4.不支持新的map,set等数据结构
### Vue3中为了解决以上问题，使用原生的Proxy代替。
可以同时支持object和array,动态属性增、删都可以拦截，新增数据结构支持，对象嵌套属性运行时递归，用到才代理，不需要维护特别多的依赖关系

